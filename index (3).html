<html>
 <head>
  <title>
   Multi-Screen App
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
   body {
            font-family: 'Roboto', sans-serif;
        }
        .hidden {
            display: none;
        }
  </style>
 </head>
 <body class="bg-gray-100 flex flex-col min-h-screen">
  <header class="bg-white shadow p-4 flex justify-between items-center">
   <h1 class="text-4xl font-bold text-center">
    E Sell
   </h1>
   <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="showScreen('my-deliver')">
    My Deliver
   </button>
  </header>
  <div class="flex-grow flex flex-col justify-center items-center">
   <div class="p-4" id="home">
    <h2 class="text-2xl font-bold mb-4 text-center">
     Home
    </h2>
    <p>
     Welcome to the Home screen. This is the main landing page of the app.
    </p>
    <div id="home-posts">
    </div>
   </div>
   <div class="p-4 hidden" id="vegetable">
    <div class="flex justify-between items-center w-full">
     <button class="bg-gray-300 text-black px-4 py-2 rounded mb-4" onclick="showScreen('home')">
      Back
     </button>
     <h2 class="text-2xl font-bold mb-4 text-center flex-grow">
      Vegetable
     </h2>
    </div>
    <p>
     Welcome to the Vegetable screen. Here you can find various vegetables.
    </p>
    <ul class="list-disc pl-5" id="vegetable-posts">
    </ul>
   </div>
   <div class="p-4 hidden" id="fruits">
    <div class="flex justify-between items-center w-full">
     <button class="bg-gray-300 text-black px-4 py-2 rounded mb-4" onclick="showScreen('home')">
      Back
     </button>
     <h2 class="text-2xl font-bold mb-4 text-center flex-grow">
      Fruits
     </h2>
    </div>
    <p>
     Welcome to the Fruits screen. Here you can find various fruits.
    </p>
    <ul class="list-disc pl-5" id="fruits-posts">
    </ul>
   </div>
   <div class="p-4 hidden" id="profile">
    <div class="flex justify-between items-center w-full">
     <button class="bg-gray-300 text-black px-4 py-2 rounded mb-4" onclick="showScreen('home')">
      Back
     </button>
     <h2 class="text-2xl font-bold mb-4 text-center flex-grow">
      Profile
     </h2>
    </div>
    <p>
     Welcome to the Profile screen. Here you can manage your profile settings.
    </p>
    <div class="flex items-center space-x-4 mb-4">
     <img alt="Profile picture of a user" class="rounded-full" height="100" id="profile-picture" src="https://storage.googleapis.com/a1aa/image/W2R85ujFReTXOy3MjDPYWp0qXm1gjrjyYjxA1WDew8rEsw0TA.jpg" width="100"/>
     <div>
      <h2 class="text-xl font-bold" id="profile-name">
       John Doe
      </h2>
      <p id="profile-email">
       Email: john.doe@example.com
      </p>
      <p id="profile-address">
       Address: 123 Main St
      </p>
      <p id="profile-phone">
       Phone: 123-456-7890
      </p>
     </div>
    </div>
    <button class="bg-blue-600 text-white px-4 py-2 rounded mb-4" onclick="showScreen('edit-profile')">
     Edit Profile
    </button>
    <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="showScreen('create-post')">
     Add Post
    </button>
    <div id="profile-posts" class="mt-4 w-full">
    </div>
   </div>
   <div class="p-4 hidden" id="edit-profile">
    <div class="flex justify-between items-center w-full">
     <button class="bg-gray-300 text-black px-4 py-2 rounded mb-4" onclick="showScreen('profile')">
      Back
     </button>
     <h2 class="text-2xl font-bold mb-4 text-center flex-grow">
      Edit Profile
     </h2>
    </div>
    <form id="edit-profile-form">
     <div class="mb-4">
      <label class="block text-gray-700">
       Name
      </label>
      <input class="w-full p-2 border rounded" id="edit-name" required type="text" value="John Doe"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Email
      </label>
      <input class="w-full p-2 border rounded" id="edit-email" required type="email" value="john.doe@example.com"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Address
      </label>
      <input class="w-full p-2 border rounded" id="edit-address" required type="text" value="123 Main St"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Phone Number
      </label>
      <input class="w-full p-2 border rounded" id="edit-phone" required type="tel" value="123-456-7890"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Profile Picture
      </label>
      <input class="w-full p-2 border rounded" id="edit-profile-picture" type="file"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Background Picture
      </label>
      <input class="w-full p-2 border rounded" id="edit-background-picture" type="file"/>
     </div>
     <button class="bg-blue-600 text-white px-4 py-2 rounded" type="submit">
      Save Changes
     </button>
    </form>
   </div>
   <div class="p-4 hidden" id="create-post">
    <div class="flex justify-between items-center w-full">
     <button class="bg-gray-300 text-black px-4 py-2 rounded mb-4" onclick="showScreen('profile')">
      Back
     </button>
     <h2 class="text-2xl font-bold mb-4 text-center flex-grow">
      Create Post
     </h2>
    </div>
    <form id="post-form">
     <div class="mb-4">
      <label class="block text-gray-700">
       Category
      </label>
      <select class="w-full p-2 border rounded" id="category" required>
       <option value="vegetable">
        Vegetable
       </option>
       <option value="fruits">
        Fruits
       </option>
      </select>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Name
      </label>
      <input class="w-full p-2 border rounded" id="name" required type="text"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Price
      </label>
      <input class="w-full p-2 border rounded" id="price" required type="number"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Kilos
      </label>
      <input class="w-full p-2 border rounded" id="kilos" required type="number"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Image
      </label>
      <input class="w-full p-2 border rounded" id="image" required type="file"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Phone Number
      </label>
      <input class="w-full p-2 border rounded" id="phone" required type="tel"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Location
      </label>
      <input class="w-full p-2 border rounded" id="location" required type="text"/>
     </div>
     <div class="mb-4">
      <label class="block text-gray-700">
       Description
      </label>
      <textarea class="w-full p-2 border rounded" id="description" required>
      </textarea>
     </div>
     <button class="bg-blue-600 text-white px-4 py-2 rounded" type="submit">
      Create Post
     </button>
    </form>
   </div>
   <div class="p-4 hidden" id="my-deliver">
    <div class="flex justify-between items-center w-full">
     <button class="bg-gray-300 text-black px-4 py-2 rounded mb-4" onclick="showScreen('home')">
      Back
     </button>
     <h2 class="text-2xl font-bold mb-4 text-center flex-grow">
      My Deliver
     </h2>
    </div>
    <p>
     Welcome to the My Deliver screen. Here you can manage your deliveries.
    </p>
    <div id="deliver-posts">
    </div>
   </div>
  </div>
  <nav class="bg-blue-600 p-4 text-white flex justify-around fixed bottom-0 w-full" id="nav-bar">
   <button class="hover:underline" onclick="showScreen('home')">
    Home
   </button>
   <button class="hover:underline" onclick="showScreen('vegetable')">
    Vegetable
   </button>
   <button class="hover:underline" onclick="showScreen('fruits')">
    Fruits
   </button>
   <button class="hover:underline" onclick="showScreen('profile')">
    Profile
   </button>
  </nav>
  <script>
   let editingPost = null;

        function showScreen(screenId) {
            const screens = ['home', 'vegetable', 'fruits', 'profile', 'create-post', 'edit-profile', 'my-deliver'];
            screens.forEach(screen => {
                document.getElementById(screen).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        document.getElementById('post-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const category = document.getElementById('category').value;
            const name = document.getElementById('name').value;
            const price = document.getElementById('price').value;
            const kilos = document.getElementById('kilos').value;
            const image = document.getElementById('image').files[0];
            const phone = document.getElementById('phone').value;
            const location = document.getElementById('location').value;
            const description = document.getElementById('description').value;

            const reader = new FileReader();
            reader.onload = function(e) {
                const imageUrl = e.target.result;

                const postHtml = `
                    <li class="mb-4" data-category="${category}">
                        <img src="${imageUrl}" alt="Image of ${name}" class="w-full h-48 object-cover mb-2">
                        <h3 class="text-xl font-bold">${name}</h3>
                        <p>Price: Rs ${price}</p>
                        <p>Kilos: ${kilos} kg</p>
                        <p>Phone: ${phone}</p>
                        <p>Location: ${location}</p>
                        <p>Description: ${description}</p>
                        <button class="bg-green-600 text-white px-4 py-2 rounded mt-2" onclick="buyPost(this, '${phone}')">Buy</button>
                        <div class="profile-actions hidden">
                            <button class="bg-blue-600 text-white px-4 py-2 rounded mt-2" onclick="editPost(this)">Edit</button>
                            <button class="bg-red-600 text-white px-4 py-2 rounded mt-2" onclick="deletePost(this)">Delete</button>
                        </div>
                    </li>
                `;

                if (editingPost) {
                    editingPost.outerHTML = postHtml;
                    editingPost = null;
                } else {
                    document.getElementById('profile-posts').insertAdjacentHTML('beforeend', postHtml);

                    if (category === 'vegetable') {
                        document.getElementById('vegetable-posts').insertAdjacentHTML('beforeend', postHtml);
                        document.getElementById('home-posts').insertAdjacentHTML('beforeend', postHtml);
                    } else if (category === 'fruits') {
                        document.getElementById('fruits-posts').insertAdjacentHTML('beforeend', postHtml);
                        document.getElementById('home-posts').insertAdjacentHTML('beforeend', postHtml);
                    }
                }

                updateAllScreens();
                showScreen('profile');
            };
            reader.readAsDataURL(image);
        });

        function deletePost(button) {
            const post = button.parentElement.parentElement;
            post.remove();
            updateAllScreens();
        }

        function editPost(button) {
            const post = button.parentElement.parentElement;
            const name = post.querySelector('h3').textContent;
            const price = post.querySelector('p:nth-of-type(1)').textContent.replace('Price: Rs ', '');
            const kilos = post.querySelector('p:nth-of-type(2)').textContent.replace('Kilos: ', '').replace(' kg', '');
            const phone = post.querySelector('p:nth-of-type(3)').textContent.replace('Phone: ', '');
            const location = post.querySelector('p:nth-of-type(4)').textContent.replace('Location: ', '');
            const description = post.querySelector('p:nth-of-type(5)').textContent.replace('Description: ', '');

            document.getElementById('name').value = name;
            document.getElementById('price').value = price;
            document.getElementById('kilos').value = kilos;
            document.getElementById('phone').value = phone;
            document.getElementById('location').value = location;
            document.getElementById('description').value = description;

            editingPost = post;
            showScreen('create-post');
        }

        function buyPost(button, phoneNumber) {
            const post = button.parentElement;
            document.getElementById('deliver-posts').insertAdjacentHTML('beforeend', post.outerHTML);
            window.location.href = `tel:${phoneNumber}`;
            showScreen('my-deliver');
        }

        function updateAllScreens() {
            const profilePosts = document.getElementById('profile-posts').innerHTML;
            document.getElementById('home-posts').innerHTML = profilePosts;

            // Filter posts for vegetable screen
            const vegetablePosts = Array.from(document.querySelectorAll('#profile-posts li[data-category="vegetable"]')).map(post => post.outerHTML).join('');
            document.getElementById('vegetable-posts').innerHTML = vegetablePosts;

            // Filter posts for fruits screen
            const fruitsPosts = Array.from(document.querySelectorAll('#profile-posts li[data-category="fruits"]')).map(post => post.outerHTML).join('');
            document.getElementById('fruits-posts').innerHTML = fruitsPosts;

            // Remove edit and delete buttons from non-profile screens
            document.querySelectorAll('#home-posts .profile-actions, #vegetable-posts .profile-actions, #fruits-posts .profile-actions').forEach(actions => {
                actions.remove();
            });
        }

        document.getElementById('edit-profile-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const name = document.getElementById('edit-name').value;
            const email = document.getElementById('edit-email').value;
            const address = document.getElementById('edit-address').value;
            const phone = document.getElementById('edit-phone').value;
            const profilePicture = document.getElementById('edit-profile-picture').files[0];
            const backgroundPicture = document.getElementById('edit-background-picture').files[0];

            document.getElementById('profile-name').textContent = name;
            document.getElementById('profile-email').textContent = `Email: ${email}`;
            document.getElementById('profile-address').textContent = `Address: ${address}`;
            document.getElementById('profile-phone').textContent = `Phone: ${phone}`;

            if (profilePicture) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profile-picture').src = e.target.result;
                };
                reader.readAsDataURL(profilePicture);
            }

            if (backgroundPicture) {
                const bgReader = new FileReader();
                bgReader.onload = function(e) {
                    document.body.style.backgroundImage = `url(${e.target.result})`;
                };
                bgReader.readAsDataURL(backgroundPicture);
            }

            showScreen('profile');
        });

        document.addEventListener('DOMContentLoaded', function() {
            const profilePosts = document.getElementById('profile-posts');
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.addedNodes.length) {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1) {
                                const actions = node.querySelector('.profile-actions');
                                if (actions) {
                                    actions.classList.remove('hidden');
                                }
                            }
                        });
                    }
                });
            });

            observer.observe(profilePosts, { childList: true });
        });

        // Show the home screen by default
        showScreen('home');
  </script>
 </body